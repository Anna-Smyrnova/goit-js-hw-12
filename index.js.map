{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n    \n\naxios.defaults.baseURL =  \"https://pixabay.com/api/\";\naxios.defaults.params = {\n  key: \"54666268-2618e7de02917d56fb8a894d5\",\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n};\n\nexport async function getImagesByQuery(query, page = 1) { \n  const res = await axios.get('', {\n    params: {\n      ...axios.defaults.params,\n      q: query,\n      page: page,\n    }\n  });\n  return res.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { currentPage } from \"../main.js\";\nimport { maxPage } from \"../main.js\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.js-load-btn');\n\nlet galLight;\n\nfunction createGallery(images) {\n  const markup = images.map(image => `\n    <li class=\"item-gallery\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360px\" height=\"152px\">\n      </a>\n      <ul class=\"card-info\">\n        <li>\n          <h4>Likes</h4>\n          <p>${image.likes}</p>\n        </li>\n        <li>\n          <h4>Views</h4>\n          <p>${image.views}</p>\n        </li>\n        <li>\n          <h4>Comments</h4>\n          <p>${image.comments}</p>\n        </li>\n        <li>\n          <h4>Downloads</h4>\n          <p>${image.downloads}</p>\n        </li>\n      </ul>\n    </li>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!galLight) {\n    galLight = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250\n    });\n  } else {\n    galLight.refresh();\n  }\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n  if (loader) loader.classList.add('is-active');\n}\n\nfunction hideLoader() {\n  if (loader) loader.classList.remove('is-active');\n}\n\nfunction showLoadMoreButton() {\n  loadBtn.disabled = false;\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreButton() {\n  loadBtn.disabled = true;\n  loadBtn.classList.add('hidden');\n}\n\nexport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n  hideLoadMoreButton\n} from './js/render-functions.js';\n\n\nconst formElem = document.querySelector('.form');\nconst inputValue = document.querySelector('[name=\"search-text\"]');\nconst loadBtn = document.querySelector('.js-load-btn');\n\nlet inputVal = '';\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  inputVal = inputValue.value.trim();\n  currentPage = 1;\n\n  if (!inputVal) {\n    iziToast.error({ message: 'Please enter a search query!' });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const res = await getImagesByQuery(inputVal, currentPage);\n    const images = res.hits;\n\n    if (images.length === 0) {\n      iziToast.error({ message: 'No images found for your query.' });\n      return;\n    }\n\n    createGallery(images);\n\n    maxPage = Math.ceil(res.totalHits / pageSize);\n\n    if (currentPage < maxPage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.info({ message: \"You've reached the end of search results.\" });\n    }\n  } catch {\n    iziToast.error({ message: 'Error fetching images. Please try again.' });\n  } finally {\n    hideLoader();\n  }\n\n  formElem.reset();\n});\n\n\nloadBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const res = await getImagesByQuery(inputVal, currentPage);\n    const images = res.hits;\n\n    if (images.length === 0) return;\n\n    createGallery(images);\n\n \n    const firstCard = document.querySelector('.gallery .item-gallery');\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n\n    maxPage = Math.ceil(res.totalHits / pageSize);\n  } catch {\n    iziToast.error({ message: 'Error fetching images. Please try again.' });\n  } finally {\n    hideLoader();\n\n    if (currentPage < maxPage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.info({ message: \"You've reached the end of search results.\" });\n    }\n  }\n});"],"names":["axios","getImagesByQuery","query","page","gallery","loader","loadBtn","galLight","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElem","inputValue","inputVal","currentPage","maxPage","pageSize","e","iziToast","res","firstCard","cardHeight"],"mappings":"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"}